<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>密碼產生器 - 實用小工具集</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");
        body { font-family: "Inter", sans-serif; }
    </style>
</head>
<body class="bg-white text-gray-900 min-h-screen antialiased">
    <nav class="border-b border-gray-100">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <div class="flex items-center gap-2">
                    <a href="index.html" class="w-8 h-8 bg-black rounded-lg flex items-center justify-center hover:opacity-80 transition-opacity">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/></svg>
                    </a>
                    <span class="text-xl font-bold tracking-tight">密碼產生器</span>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-3xl mx-auto px-6 lg:px-8 py-20">
        <!-- 密碼顯示與複製區 -->
        <div class="relative group mb-12">
            <div class="absolute inset-0 bg-gray-100 rounded-2xl transform translate-x-1 translate-y-1 transition-transform group-hover:translate-x-2 group-hover:translate-y-2 -z-10"></div>
            <div class="relative bg-white border-2 border-black rounded-2xl p-8 flex items-center justify-between gap-4 z-10">
                <input type="text" id="passwordDisplay" readonly
                    class="w-full bg-transparent text-3xl md:text-4xl font-mono font-bold text-gray-900 focus:outline-none tracking-wider overflow-hidden text-ellipsis"
                    value="">
                <button onclick="copyPassword()" id="copyBtn"
                    class="flex-shrink-0 p-4 bg-black text-white rounded-xl hover:bg-gray-800 transition-all active:scale-95 group-hover:scale-105">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"/></svg>
                </button>
            </div>
            <!-- 強度條 -->
            <div class="flex gap-1 h-1 mt-4 px-1 opacity-50 relative z-10">
                <div id="strength-bar" class="w-full bg-gray-200 rounded-full h-full transition-all duration-500"></div>
            </div>
            <div id="strengthText" class="text-right text-xs font-bold mt-1 text-gray-400 uppercase tracking-widest relative z-10">強度</div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
            <!-- 長度控制 -->
            <div>
                <label class="block text-sm font-bold text-gray-900 mb-4 tracking-wide">密碼長度</label>
                <div class="flex items-center gap-4">
                    <input type="range" id="passwordLength" min="4" max="64" value="16"
                        class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-black">
                    <span id="lengthValue" class="text-2xl font-bold font-mono w-12 text-center">16</span>
                </div>
            </div>

            <!-- 選項控制 -->
            <div class="space-y-4">
                <label class="block text-sm font-bold text-gray-900 mb-2 tracking-wide">設定</label>

                <label class="flex items-center space-x-3 cursor-pointer group">
                    <div class="relative">
                        <input type="checkbox" id="includeUppercase" checked class="peer sr-only">
                        <div class="w-6 h-6 border-2 border-gray-300 rounded group-hover:border-black peer-checked:bg-black peer-checked:border-black transition-all"></div>
                        <svg class="absolute top-1 left-1 w-4 h-4 text-white pointer-events-none opacity-0 peer-checked:opacity-100" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <span class="text-gray-600 font-medium group-hover:text-black">大寫字母 (A-Z)</span>
                </label>

                <label class="flex items-center space-x-3 cursor-pointer group">
                    <div class="relative">
                        <input type="checkbox" id="includeLowercase" checked class="peer sr-only">
                        <div class="w-6 h-6 border-2 border-gray-300 rounded group-hover:border-black peer-checked:bg-black peer-checked:border-black transition-all"></div>
                        <svg class="absolute top-1 left-1 w-4 h-4 text-white pointer-events-none opacity-0 peer-checked:opacity-100" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <span class="text-gray-600 font-medium group-hover:text-black">小寫字母 (a-z)</span>
                </label>

                <label class="flex items-center space-x-3 cursor-pointer group">
                    <div class="relative">
                        <input type="checkbox" id="includeNumbers" checked class="peer sr-only">
                        <div class="w-6 h-6 border-2 border-gray-300 rounded group-hover:border-black peer-checked:bg-black peer-checked:border-black transition-all"></div>
                        <svg class="absolute top-1 left-1 w-4 h-4 text-white pointer-events-none opacity-0 peer-checked:opacity-100" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <span class="text-gray-600 font-medium group-hover:text-black">數字 (0-9)</span>
                </label>

                <label class="flex items-center space-x-3 cursor-pointer group">
                    <div class="relative">
                        <input type="checkbox" id="includeSymbols" class="peer sr-only">
                        <div class="w-6 h-6 border-2 border-gray-300 rounded group-hover:border-black peer-checked:bg-black peer-checked:border-black transition-all"></div>
                        <svg class="absolute top-1 left-1 w-4 h-4 text-white pointer-events-none opacity-0 peer-checked:opacity-100" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <span class="text-gray-600 font-medium group-hover:text-black">符號 (!@#)</span>
                </label>
            </div>
        </div>

        <div class="mt-12 flex justify-center">
            <button onclick="generatePassword()" class="text-gray-400 hover:text-black flex items-center gap-2 text-sm font-medium transition-colors">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
                重新產生
            </button>
        </div>
    </main>

    <script>
        const inputs = document.querySelectorAll("input");
        inputs.forEach(input => {
            input.addEventListener("input", () => {
                if(input.id === "passwordLength") updateLengthValue(input.value);
                generatePassword();
            });
            input.addEventListener("change", generatePassword); // For checkboxes
        });

        function updateLengthValue(value) {
            document.getElementById("lengthValue").textContent = value;
        }

        function generatePassword() {
            const length = parseInt(document.getElementById("passwordLength").value);
            const includeUppercase = document.getElementById("includeUppercase").checked;
            const includeLowercase = document.getElementById("includeLowercase").checked;
            const includeNumbers = document.getElementById("includeNumbers").checked;
            const includeSymbols = document.getElementById("includeSymbols").checked;

            let charset = "";
            let uppercase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
            let lowercase = "abcdefghijklmnopqrstuvwxyz";
            let numbers = "0123456789";
            let symbols = "!@#$%^&*()_+-=[]{}|;:,.<>?";

            if (includeUppercase) charset += uppercase;
            if (includeLowercase) charset += lowercase;
            if (includeNumbers) charset += numbers;
            if (includeSymbols) charset += symbols;

            if (charset === "") {
                // Keep the old password if nothing selected or show placeholder
                return;
            }

            let password = "";
            const array = new Uint32Array(length);
            crypto.getRandomValues(array);

            for (let i = 0; i < length; i++) {
                password += charset[array[i] % charset.length];
            }

            document.getElementById("passwordDisplay").value = password;
            updateStrength(password);
        }

         function updateStrength(password) {
            let strength = 0;
            if (password.length >= 10) strength++;
            if (password.length >= 16) strength++;
            if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^a-zA-Z0-9]/.test(password)) strength++;

            const strengthLevel = Math.min(5, strength);
            const bar = document.getElementById("strength-bar");
            const text = document.getElementById("strengthText");
            
            // Modern colors
            const colors = ["bg-red-500", "bg-orange-500", "bg-yellow-500", "bg-lime-500", "bg-green-600"];
            const texts = ["弱", "普通", "良好", "強", "非常安全"];
             
            bar.className = `w-full h-full rounded-full transition-all duration-500 ${colors[strengthLevel - 1] || "bg-gray-200"}`;
            text.textContent = texts[strengthLevel - 1] || "So-so";
            text.className = `text-right text-xs font-bold mt-1 uppercase tracking-widest ${colors[strengthLevel - 1]?.replace("bg-", "text-") || "text-gray-400"}`;
        }

        function copyPassword() {
            const passwordInput = document.getElementById("passwordDisplay");
            passwordInput.select();
            document.execCommand("copy");
            
            const btn = document.getElementById("copyBtn");
            const originalIcon = btn.innerHTML;
            btn.innerHTML = `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>`;
            setTimeout(() => {
                btn.innerHTML = originalIcon;
            }, 1000);
        }

        // Init
        generatePassword();
    </script>
</body>
</html>
